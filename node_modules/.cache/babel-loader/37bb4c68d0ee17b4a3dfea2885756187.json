{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isNodePattern = isNodePattern;\nexports.throwError = throwError;\nexports.scan = scan;\nexports.scanIterator = scanIterator;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _marked = /*#__PURE__*/_regenerator[\"default\"].mark(scanIterator);\n\nfunction isNodePattern(cb) {\n  if (typeof cb === 'undefined') {\n    return false;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new TypeError('Callback must be a function');\n  }\n\n  return true;\n}\n\nfunction throwError(error, cb) {\n  if (typeof error === 'string') {\n    error = new Error(error);\n  }\n\n  if (typeof cb === 'function') {\n    return cb.call(this, error);\n  }\n\n  throw error;\n}\n\nfunction scan(image, x, y, w, h, f) {\n  // round input\n  x = Math.round(x);\n  y = Math.round(y);\n  w = Math.round(w);\n  h = Math.round(h);\n\n  for (var _y = y; _y < y + h; _y++) {\n    for (var _x = x; _x < x + w; _x++) {\n      var idx = image.bitmap.width * _y + _x << 2;\n      f.call(image, _x, _y, idx);\n    }\n  }\n\n  return image;\n}\n\nfunction scanIterator(image, x, y, w, h) {\n  var _y, _x, idx;\n\n  return _regenerator[\"default\"].wrap(function scanIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          // round input\n          x = Math.round(x);\n          y = Math.round(y);\n          w = Math.round(w);\n          h = Math.round(h);\n          _y = y;\n\n        case 5:\n          if (!(_y < y + h)) {\n            _context.next = 17;\n            break;\n          }\n\n          _x = x;\n\n        case 7:\n          if (!(_x < x + w)) {\n            _context.next = 14;\n            break;\n          }\n\n          idx = image.bitmap.width * _y + _x << 2;\n          _context.next = 11;\n          return {\n            x: _x,\n            y: _y,\n            idx: idx,\n            image: image\n          };\n\n        case 11:\n          _x++;\n          _context.next = 7;\n          break;\n\n        case 14:\n          _y++;\n          _context.next = 5;\n          break;\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}","map":{"version":3,"sources":["../src/index.js"],"names":["error","cb","x","Math","y","w","h","_y","_x","idx","image","f","scanIterator"],"mappings":"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","sourcesContent":["export function isNodePattern(cb) {\n  if (typeof cb === 'undefined') {\n    return false;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new TypeError('Callback must be a function');\n  }\n\n  return true;\n}\n\nexport function throwError(error, cb) {\n  if (typeof error === 'string') {\n    error = new Error(error);\n  }\n\n  if (typeof cb === 'function') {\n    return cb.call(this, error);\n  }\n\n  throw error;\n}\n\nexport function scan(image, x, y, w, h, f) {\n  // round input\n  x = Math.round(x);\n  y = Math.round(y);\n  w = Math.round(w);\n  h = Math.round(h);\n\n  for (let _y = y; _y < y + h; _y++) {\n    for (let _x = x; _x < x + w; _x++) {\n      const idx = (image.bitmap.width * _y + _x) << 2;\n      f.call(image, _x, _y, idx);\n    }\n  }\n\n  return image;\n}\n\nexport function* scanIterator(image, x, y, w, h) {\n  // round input\n  x = Math.round(x);\n  y = Math.round(y);\n  w = Math.round(w);\n  h = Math.round(h);\n\n  for (let _y = y; _y < y + h; _y++) {\n    for (let _x = x; _x < x + w; _x++) {\n      const idx = (image.bitmap.width * _y + _x) << 2;\n      yield { x: _x, y: _y, idx, image };\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}